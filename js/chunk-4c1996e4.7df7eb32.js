(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4c1996e4"],{"09f6":function(t,e,a){},"159b":function(t,e,a){var n=a("da84"),s=a("fdbc"),i=a("17c2"),o=a("9112");for(var r in s){var l=n[r],c=l&&l.prototype;if(c&&c.forEach!==i)try{o(c,"forEach",i)}catch(u){c.forEach=i}}},"17c2":function(t,e,a){"use strict";var n=a("b727").forEach,s=a("a640"),i=s("forEach");t.exports=i?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},"1e87":function(t,e,a){"use strict";a("09f6")},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var n=a("1d80"),s=a("5899"),i="["+s+"]",o=RegExp("^"+i+i+"*"),r=RegExp(i+i+"*$"),l=function(t){return function(e){var a=String(n(e));return 1&t&&(a=a.replace(o,"")),2&t&&(a=a.replace(r,"")),a}};t.exports={start:l(1),end:l(2),trim:l(3)}},7156:function(t,e,a){var n=a("861d"),s=a("d2bb");t.exports=function(t,e,a){var i,o;return s&&"function"==typeof(i=e.constructor)&&i!==a&&n(o=i.prototype)&&o!==a.prototype&&s(t,o),t}},a640:function(t,e,a){"use strict";var n=a("d039");t.exports=function(t,e){var a=[][t];return!!a&&n((function(){a.call(null,e||function(){throw 1},1)}))}},a769:function(t,e,a){},a9e3:function(t,e,a){"use strict";var n=a("83ab"),s=a("da84"),i=a("94ca"),o=a("6eeb"),r=a("5135"),l=a("c6b6"),c=a("7156"),u=a("c04e"),h=a("d039"),g=a("7c73"),d=a("241c").f,f=a("06cf").f,p=a("9bf2").f,m=a("58a8").trim,v="Number",M=s[v],y=M.prototype,b=l(g(y))==v,w=function(t){var e,a,n,s,i,o,r,l,c=u(t,!1);if("string"==typeof c&&c.length>2)if(c=m(c),e=c.charCodeAt(0),43===e||45===e){if(a=c.charCodeAt(2),88===a||120===a)return NaN}else if(48===e){switch(c.charCodeAt(1)){case 66:case 98:n=2,s=49;break;case 79:case 111:n=8,s=55;break;default:return+c}for(i=c.slice(2),o=i.length,r=0;r<o;r++)if(l=i.charCodeAt(r),l<48||l>s)return NaN;return parseInt(i,n)}return+c};if(i(v,!M(" 0o1")||!M("0b1")||M("+0x1"))){for(var x,_=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof _&&(b?h((function(){y.valueOf.call(a)})):l(a)!=v)?c(new M(w(e)),a,_):w(e)},C=n?d(M):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),I=0;C.length>I;I++)r(M,x=C[I])&&!r(_,x)&&p(_,x,f(M,x));_.prototype=y,y.constructor=_,o(s,v,_)}},d91f:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fansManagement"},[a("div",{staticClass:"fansManagement_top"},[a("div",{staticClass:"fansManagement_title"},[t._v(" 粉丝管理 ")]),a("div",[a("Button",{staticClass:"mgleft_15",attrs:{type:"primary",disabled:!t.judgeNum},on:{click:t.handSynchronizeFans}},[t._v("同步粉丝")])],1)]),a("div",{staticClass:"fansManagement_in"},[a("div",{staticClass:"fansManagement_in_item"},[a("Select",{staticStyle:{width:"200px"},on:{"on-change":t.handgetWxFansList},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}},t._l(t.stateList,(function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1),a("div",{staticClass:"fansManagement_in_item"},[a("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入微信号/手机号/微信昵称"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("div",{staticClass:"fansManagement_in_item_border"},[a("DatePicker",{staticStyle:{width:"210px","padding-right":"10px"},attrs:{type:"daterange",value:t.startTime,format:"yyyy-MM-dd",placeholder:"请选择时间"},on:{"on-change":t.getStartTime}}),a("Button",{attrs:{type:"primary"},on:{click:t.handgetWxFansList}},[t._v("搜索")])],1)]),a("div",{staticClass:"fansManagement_bot"},[a("Table",{ref:"tableFams",attrs:{columns:t.columns1,data:t.data1,height:t.tableHeight},scopedSlots:t._u([{key:"img",fn:function(e){var n=e.row;return[a("div",{staticStyle:{display:"flex","align-items":"center","text-align":"left"}},[a("div",{staticClass:"mgright_15"},[a("Avatar",{attrs:{src:n.portrait}})],1),a("div",[t._v(t._s(n.nickname))])])]}},{key:"follow",fn:function(e){var n=e.row;return[0==n.followState?a("div",{staticClass:"color_Warning"},[t._v("未知")]):t._e(),1==n.followState?a("div",{staticClass:"color_theme"},[t._v("关注")]):t._e(),2==n.followState?a("div",{staticClass:"color_Error"},[t._v("取关")]):t._e()]}},{key:"isGetCustomerData",fn:function(e){var n=e.row;return[0==n.isGetCustomerData?a("div",{staticClass:"color_Warning"},[t._v("未获取")]):t._e(),1==n.isGetCustomerData?a("div",{staticClass:"color_theme"},[t._v("已获取")]):t._e()]}},{key:"isReply",fn:function(e){var n=e.row;return[a("i-switch",{on:{"on-change":function(e){return t.handIsReplyChange(e,n)}},model:{value:n.isReply,callback:function(e){t.$set(n,"isReply",e)},expression:"row.isReply"}})]}},{key:"isPursuit",fn:function(e){var n=e.row;return[a("i-switch",{on:{"on-change":function(e){return t.handIsPursuitChange(e,n)}},model:{value:n.isPursuit,callback:function(e){t.$set(n,"isPursuit",e)},expression:"row.isPursuit"}})]}},{key:"action",fn:function(e){var n=e.row;return[a("Button",{staticClass:"list_Button",attrs:{size:"small"},on:{click:function(e){return t.handgetFansAbnormalMsg(n)}}},[t._v("异常消息")]),a("Button",{staticClass:"list_Button",attrs:{size:"small"},on:{click:function(e){return t.handchatRecord(n)}}},[t._v("对话记录")])]}}])})],1),a("Modal",{attrs:{title:"异常消息",width:"1200"},on:{"on-ok":t.handfansMsgModal,"on-cancel":t.handfansMsgModal},model:{value:t.fansMsgModal,callback:function(e){t.fansMsgModal=e},expression:"fansMsgModal"}},[a("Table",{attrs:{columns:t.fansMsgColumns,border:"",data:t.fansMsglist,height:"607"}}),a("div",{staticStyle:{"text-align":"center","margin-top":"20px","padding-bottom":"20px"}},[a("Page",{attrs:{total:t.fansMsgTotal,"page-size":t.fansMsgLimit,"show-total":"","show-elevator":""},on:{"on-page-size-change":t.handleCurrentChangeMsg,"on-change":t.handleSizeChangeMsg}})],1)],1),a("ChatBox",{ref:"chatbox"}),a("div",{staticStyle:{"text-align":"center","margin-top":"20px","padding-bottom":"20px"}},[a("Page",{attrs:{total:t.total,"page-size":t.limit,"show-total":"","show-elevator":""},on:{"on-page-size-change":t.handleSizeChange,"on-change":t.handleCurrentChange}})],1)],1)},s=[],i=(a("ac1f"),a("841c"),a("159b"),a("a9e3"),a("365c")),o={data:function(){return{model1:"",typeList:[{value:1,label:"回复时间"},{value:2,label:"关注时间"}],stateList:[{value:0,label:"全部客资"},{value:1,label:"未获取客资"},{value:2,label:"已关注"}],columns1:[{title:"排序",type:"index",align:"center"},{title:"微信",key:"age",slot:"img",width:250},{title:"是否关注",slot:"follow",align:"center"},{title:"关注时间",key:"subscribeTime",width:170,align:"center"},{title:"互动时间",key:"updateTime",width:170,align:"center",render:function(t,e){return e.row.updateTime?t("span",e.row.updateTime):t("span","暂无")}},{title:"客资状态",align:"center",slot:"isGetCustomerData"},{title:"智能回复",align:"center",slot:"isReply"},{title:"自动追粉",align:"center",slot:"isPursuit"},{title:"消息",key:"messageNum",align:"center"},{title:"异常消息",key:"abnormalMessageNum",align:"center"},{title:"操作",slot:"action",width:200,align:"center"}],data1:[],wxAppId:localStorage.getItem("wxAppId"),startTime:"",endTime:"",search:"",type:1,state:0,page:1,limit:15,total:0,fansMsgColumns:[{title:"排序",type:"index",align:"center"},{title:"时间",key:"creationTime",align:"center"},{title:"内容",key:"content",align:"center"}],fansMsgModal:!1,fansMsglist:[],fansMsgPage:1,fansMsgLimit:15,fansMsgTotal:0,judgeNum:0,tableHeight:607}},mounted:function(){window.addEventListener("resize",this.getTableHeight),this.getTableHeight(),this.handgetWxFansList(),this.handjudgeSynchronize()},methods:{getTableHeight:function(){console.log(this.$refs.tableFams),this.$refs.tableFams&&(this.tableHeight=window.innerHeight-this.$refs.tableFams.$el.offsetTop-200)},handSynchronizeFans:function(){var t=this;i["a"].synchronizeFans({wxAppId:this.wxAppId}).then((function(e){t.$Modal.info({title:"请等待",content:"<p>粉丝同步中，请稍等...</p>"}),console.log("this.data1",e)}))},handjudgeSynchronize:function(){var t=this;i["a"].judgeSynchronize({wxAppId:this.wxAppId}).then((function(e){t.judgeNum=e.data.isSynchronize,console.log("this.data1",e)}))},handgetFansAbnormalMsg:function(t){var e=this,a={page:this.fansMsgPage,limit:this.fansMsgLimit,wxId:t.wxId};i["a"].getFansAbnormalMsg(a).then((function(t){e.fansMsglist=t.data.list,e.fansMsgModal=!0,e.fansMsgTotal=t.data.pageData.count,console.log("this.data1",e.data1)}))},handfansMsgModal:function(){this.fansMsgModal=!1,this.fansMsglist=[],this.fansMsgPage=1,this.fansMsgLimit=10,this.fansMsgTotal=0},handleCurrentChangeMsg:function(t){this.fansMsgPage=t,this.handgetWxFansList()},handleSizeChangeMsg:function(t){this.fansMsgLimit=t,this.page=1,this.handgetWxFansList()},handgetWxFansList:function(){var t=this,e={page:this.page,limit:this.limit,wxAppId:this.wxAppId,startTime:this.startTime[0]?this.startTime[0]:"",endTime:this.startTime[1]?this.startTime[1]:"",type:this.type,state:this.state,search:this.search};i["a"].getWxFansList(e).then((function(e){t.data1=e.data.list,t.data1.forEach((function(t){t.isReply=Boolean(t.isReply),t.isPursuit=Boolean(t.isPursuit)})),t.total=e.data.pageData.count,console.log("this.data1",t.data1)}))},handIsReplyChange:function(t,e){var a=this,n=Number(t);i["a"].setFansReply({isReply:n,wxId:e.wxId}).then((function(t){console.log("res",t),a.$Message.success("修改成功")}))},handIsPursuitChange:function(t,e){var a=this,n=Number(t);i["a"].setFansPursuit({isPursuit:n,wxId:e.wxId}).then((function(t){console.log("res",t),a.$Message.success("修改成功")}))},handchatRecord:function(t){this.$refs.chatbox.modalTrue(t)},getStartTime:function(t){this.startTime=t},getEndTime:function(t){this.endTime=t},handleCurrentChange:function(t){this.page=t,this.handgetWxFansList()},handleSizeChange:function(t){this.limit=t,this.page=1,this.handgetWxFansList()}},created:function(){}},r=o,l=(a("1e87"),a("dc82"),a("2877")),c=Object(l["a"])(r,n,s,!1,null,"457994e9",null);e["default"]=c.exports},dc82:function(t,e,a){"use strict";a("a769")}}]);
//# sourceMappingURL=chunk-4c1996e4.7df7eb32.js.map